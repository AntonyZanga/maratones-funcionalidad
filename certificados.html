<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Certificados Médicos</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <header class="header">
    <div class="container header-container">
      <h1>Certificados Médicos</h1>
      <div class="admin-header-buttons" style="display: flex; gap: 1rem; align-items: center;">
        <a href="index.html" id="volver-index" class="btn btn-accent">Volver al Inicio</a>
        <button id="logout" class="btn btn-secondary">Cerrar Sesión</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="certificados-header" style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap;">
        <div style="display:flex;gap:0.7em;flex-wrap:wrap;">
          <select id="filtro-estado" class="btn" style="min-width:140px;">
            <option value="">Todos los estados</option>
            <option value="valido">Válido</option>
            <option value="invalido">Inválido</option>
            <option value="pendiente">Pendiente</option>
          </select>
          <input type="text" id="busqueda-certificados" class="btn" style="min-width:180px;" placeholder="Buscar por nombre o DNI">
          <button id="exportar-certificados" class="btn btn-accent"><i class="fas fa-file-excel"></i> Exportar Excel</button>
          <input type="text" id="scan-dni" class="btn" style="min-width:140px;" placeholder="Escanear DNI">
        </div>
      </div>
      <div id="certificados-contadores" style="margin:0.7em 0 1em 0;display:flex;gap:1.5em;"></div>
      <div class="certificados-table-wrapper" style="overflow-x:auto;">
        <table id="tabla-certificados" class="certificados-table" style="width:100%;min-width:900px;">
          <thead>
            <tr>
              <th data-sort="nombre">Nombre</th>
              <th data-sort="apellido">Apellido</th>
              <th data-sort="dni">DNI</th>
              <th data-sort="estado">Estado</th>
              <th data-sort="fechaCarga">Fecha de Carga</th>
              <th>Certificado</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            <!-- Filas generadas dinámicamente -->
          </tbody>
        </table>
      </div>
    </section>
    <!-- Modal para ver certificado -->
    <div id="modal-certificado" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);z-index:9999;align-items:center;justify-content:center;overflow:auto;">
      <div style="background:#fff;padding:2em;max-width:90vw;max-height:90vh;overflow:auto;position:relative;border-radius:1em;">
        <button id="cerrar-modal-certificado" class="btn btn-error" style="position:absolute;top:1em;right:1em;z-index:2;"><i class="fas fa-times"></i> Cerrar</button>
        <div id="contenido-certificado"></div>
      </div>
    </div>
  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@zxing/browser@0.0.10/umd/index.min.js"></script>
  <script type="module" src="admin-certificados.js"></script>
</body>
</html> 